<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Download Cytoscape</title>

    <meta name="description" content="Download page for Cytoscape.">
    <meta name="author" content="Keiichiro Ono">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="js/UAParser/ua-parser.0.7.0.min.js"></script>

    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

    <link href="css/main.bootstrap.css" rel="stylesheet">
</head>

<body>


<div class="narrow white">
    <div class="container">
        <div class="row centering">
            <button disabled class="btn download-button download-primary">
                <a href="">
                    <h1><img src="images/logo/cy3logoOrange.svg"/>Download Cytoscape</h1>

                    <div class="platform">
                        <h2><span class="glyphicon glyphicon-cloud-download"></span></h2>
                    </div>
                </a>
            </button>
        </div>
    </div>

</div>

<div class="narrow white">
    <div class="container">
        <div class="row centering">
            <div class="col-sm-12 col-md-6">
                <a href="download-platforms.html">
                    <button disabled class="btn btn-lg download-button download-small">
                        For Other Platforms
                    </button>
                </a>
            </div>
            <div class="col-sm-12 col-md-6">
                <a href="download_old_versions.html">
                    <button disabled class="btn btn-lg download-button download-small">
                        Old Versions
                    </button>
                </a>
            </div>
        </div>
    </div>
</div>


<div class="white">
    <div class="container">
        <div class="row centering">
            <h3>License Agreement</h3>
        </div>
        <div class="row centering">
            <div class="checkbox">
                <label>
                    <input class="checkbox" type="checkbox" id="agree" name="agree" required/>
                    <strong>I accept terms of use</strong>
                </label>
            </div>
        </div>

        <div class="row">
            <p>
                Cytoscape is available as a platform-independent open-source Java application, released under the
                terms of the <a href="http://www.gnu.org/copyleft/lesser.html" target="_new">LGPL</a>.
                To obtain Cytoscape, you must:
            </p>
            <ul>
                <li> Read the license agreement that follows and make sure you agree with its terms.</li>
                <li><strong>Click the checkbox to enable the download button.</strong></li>
            </ul>
        </div>
    </div>
    <div class="light-gray">
        <div class="container">
            <div class="license"></div>
        </div>
    </div>
</div>


<footer></footer>

<script>
    $(function () {
        var LATEST_CYTOSCAPE_VERSION = "3.1.1";
        var FILE_PREFIX = 'Cytoscape_3_1_1_';
        var BASE_URL = 'http://chianti.ucsd.edu/cytoscape-' + LATEST_CYTOSCAPE_VERSION + '/' + FILE_PREFIX;

        var is64 = true;

        var parser = new UAParser();
        console.log(parser.getOS());
        console.log(parser.getCPU());
        console.log(window.navigator.platform);
        console.log(window.navigator.cpuClass);
        if (navigator.userAgent.indexOf("WOW64") === -1 ||
                navigator.userAgent.indexOf("Win64") === -1) {
            is64 = false;
        }

        var osString = '';
        var osName = parser.getOS().name;
        var fileName = '';

        if (osName.indexOf('Mac OS') !== -1) {
            osString = osName;
            fileName = 'macos.dmg';
        } else if (osName.indexOf('Windows') !== -1) {
            // This is windows.
            if (is64) {
                osString = osName + '(64 bit version)';
                fileName = 'windows_64bit.exe';
            } else {
                osString = osName + '(32 bit version)';
                fileName = 'windows_32bit.exe';
            }
        } else if (osName.indexOf('Linux') !== -1 || osName.indexOf('Ubuntu') !== -1) {
            osString = osName;
            fileName = 'unix.sh';
        } else {
            osString = '? (please select specific version by yourself)';
        }

        var downloadLink = BASE_URL + fileName;

        $('.platform h2').append(' for ' + osString);
        $('.download-primary a').attr('href', downloadLink);

        $.ajax({
            url: "../LGPL.txt",
            success: function (data) {
                var lines = data.split(/\n/);

                $(".license").html(lines.join("<br />"));
            }
        });

        var button = $('.download-button');
        button.attr('disabled', 'disabled');
        $('#agree').change(function (status) {
            if (this.checked) {
                button.removeAttr('disabled');
            } else {
                button.attr('disabled', 'disabled');
            }
        });
    });
</script>
<script src="js/setup_page.js"></script>
</body>
</html>
