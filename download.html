<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Download Cytoscape</title>

    <meta name="description" content="Download page for Cytoscape.">
    <meta name="author" content="Keiichiro Ono">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="js/download.js"></script>

    <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="js/UAParser/ua-parser.0.7.0.min.js"></script>

    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

    <link href="css/main.bootstrap.css" rel="stylesheet">
</head>

<body>
<!--[if lt IE 11]>
<p class="browsehappy">
    You are using an <strong>outdated, ancient, archaic</strong> browser.
    Please <a href="http://browsehappy.com/">upgrade
    your browser</a> to improve your experience.
</p>
<![endif]-->

<div class="narrow white">
    <div class="container">
        <div class="row centering">
            <img src="images/logo/cy3logoOrange.svg"/>
            <h3>License Agreement</h3>
        </div>
        <div class="row centering">
            <div class="checkbox">
                <label>
                    <input class="checkbox" type="checkbox" id="agree" name="agree" required/>
                    <strong class="warn">I accept terms of use</strong>
                </label>
            </div>
        </div>

        <div class="row centering">
            <div class="col-sm-12 col-md-8 col-md-offset-2">
                <p>
                    Cytoscape is available as a platform-independent open-source Java application, released under the
                    terms of the <a href="http://www.gnu.org/copyleft/lesser.html" target="_new">LGPL</a>.
                    To obtain Cytoscape, you must:
                </p>

                <p>Read the license agreement that follows and make sure you agree with its terms.</p>

                <p>Click the checkbox to enable the download button.</p>
            </div>
        </div>
        <div class="row centering">
            <h3>Java 7 Is required. <strong>Java 8 support is still experimental.</strong></h3>
        </div>
    </div>
</div>

<div class="narrow white">
    <div class="container">
        <div class="row centering">
            <a class="download-primary">
                <button disabled class="btn download-button platform">
                    <h1>
                        <span class="glyphicon glyphicon-cloud-download"></span>
                    </h1>
                </button>
            </a>
            <div class="warn win32"></div>
        </div>
    </div>

</div>

<div class="narrow white">
    <div class="container">
        <div class="row centering">
            <div class="col-sm-12 col-md-4 col-md-offset-2">
                <a href="download-platforms.html">
                    <button disabled class="btn btn-lg download-button download-small">
                        For Other Platforms
                    </button>
                </a>
            </div>
            <div class="col-sm-12 col-md-4">
                <a href="download_old_versions.html">
                    <button disabled class="btn btn-lg download-button download-small">
                        Old Versions
                    </button>
                </a>
            </div>
        </div>
    </div>
</div>


<div class="white">
    <div class="light-gray">
        <div class="container centering">
            <h3>
                CYTOSCAPE LICENSE AGREEMENT
            </h3>
            <h4>
                GNU LESSER GENERAL PUBLIC LICENSE
                Version 2.1, February 1999
            </h4>

            <div class="license"></div>
        </div>
    </div>
</div>


<footer></footer>

<script>
    $(function () {
        var BASE_URL = LATEST.url + 'Cytoscape_' + LATEST.version.split('.').join('_') + '_';

        var is64 = true;

        var parser = new UAParser();
        console.log(parser.getOS());
        console.log(parser.getCPU());
        console.log(window.navigator.platform);
        console.log(window.navigator.cpuClass);
        if (navigator.userAgent.indexOf("WOW64") === -1 ||
                navigator.userAgent.indexOf("Win64") === -1) {
            is64 = false;
        }

        var osString = '';
        var osName = parser.getOS().name;
        var cpu = parser.getCPU();
        var architecture = null;
        if (cpu !== undefined) {
            architecture = cpu.architecture;
        }
        var fileName = '';

        if (osName.indexOf('Mac OS') !== -1) {
            osString = osName;
            fileName = 'macos.dmg';
        } else if (osName.indexOf('Windows') !== -1 || cpu === 'amd64') {
            // This is windows.
            if (is64 || architecture === 'amd64') {
                osString = osName + ' (64 bit version)';
                fileName = 'windows_64bit.exe';
            } else {
                osString = osName + ' (32 bit version)';
                fileName = 'windows_32bit.exe';
                $('.win32').append('<h3>32bit version is not recommended.  Please use 64bit version if possible.</h3>');
            }
        } else if (osName.indexOf('Linux') !== -1 || osName.indexOf('Ubuntu') !== -1) {
            osString = osName;
            fileName = 'unix.sh';
        } else {
            osString = '? (please select specific version by yourself)';
        }

        var downloadLink = BASE_URL + fileName;

        $('.platform h1').append(' for ' + osString);
        $('.download-primary').attr('href', downloadLink);

        $.ajax({
            url: "LGPL.txt",
            success: function (data) {
                var lines = data.split(/\n/);
                $(".license").html(lines.join("<br />"));
            }
        });

        var button = $('.download-button');
        var checkbox = $('#agree');

      button.attr('disabled', 'disabled');
        checkbox.change(function (status) {
            if (this.checked) {
                button.removeAttr('disabled');
            } else {
                button.attr('disabled', 'disabled');
            }
        });
    });
</script>
<script src="js/setup_page.js"></script>
</body>
</html>
